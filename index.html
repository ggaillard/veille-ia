<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Veille IA - Focus France</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><text y='.9em' font-size='90'>üá´üá∑</text></svg>">
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Garde ton style existant + optimisations */
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      margin: 0;
      padding: 0;
      color: #333;
    }
    .container {
      max-width: 1400px;
      margin: auto;
      padding: 20px;
    }
    h1, h2 {
      margin-bottom: 10px;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
    }
    .card {
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    .source-card {
      display: flex;
      justify-content: space-between;
      padding: 10px;
      background: #f5f5f5;
      border-radius: 8px;
      margin-bottom: 5px;
    }
    .news-item {
      background: #fafafa;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 10px;
      position: relative;
    }
    .fav-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: #f1c40f;
    }
    .fav-btn.favorited {
      color: #e67e22;
    }
    @media (max-width: 768px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="card">
      <h1>üá´üá∑ Veille IA Automatis√©e - Focus France</h1>
      <p>Votre agent de veille personnalis√© pour l'IA fran√ßaise et internationale</p>
    </header>

    <div class="grid">
      <!-- Sources actives -->
      <div class="card">
        <h2>üì° Sources Actives</h2>
        <div id="sources-list"></div>
      </div>

      <!-- Actualit√©s -->
      <div class="card">
        <h2>üì∞ Derni√®res Actualit√©s</h2>
        <div id="news-list">Chargement...</div>
      </div>
    </div>
  </div>

  <script defer>
    // Sources actives simul√©es
    const sources = [
      { name: "Mistral AI", active: true },
      { name: "INRIA", active: true },
      { name: "Scaleway", active: true },
      { name: "France.gouv.fr", active: true },
      { name: "Le Monde Informatique", active: true },
      { name: "DataScientest", active: true }
    ];

    // Remplit la liste des sources
    function loadSources() {
      const container = document.getElementById("sources-list");
      container.innerHTML = "";
      sources.forEach(src => {
        const div = document.createElement("div");
        div.className = "source-card";
        div.innerHTML = `
          <span>${src.name}</span>
          <span>${src.active ? "‚úÖ" : "‚ùå"}</span>
        `;
        container.appendChild(div);
      });
    }

    // Chargement dynamique des actus depuis JSON
    async function loadNews() {
      const container = document.getElementById("news-list");
      try {
        const res = await fetch("news.json");
        const news = await res.json();
        container.innerHTML = "";
        news.forEach(article => {
          const div = document.createElement("div");
          div.className = "news-item";
          div.innerHTML = `
            <h4>${article.title}</h4>
            <p>${article.date}</p>
            <p>${article.content}</p>
            <button class="fav-btn" onclick="toggleFavorite('${article.title}', this)">‚≠ê</button>
          `;
          // Si d√©j√† favori
          if (isFavorite(article.title)) {
            div.querySelector(".fav-btn").classList.add("favorited");
          }
          container.appendChild(div);
        });
      } catch (err) {
        container.innerHTML = "Erreur de chargement des actualit√©s.";
      }
    }

    // Gestion des favoris avec localStorage
    function getFavorites() {
      return JSON.parse(localStorage.getItem("favorites") || "[]");
    }
    function isFavorite(title) {
      return getFavorites().includes(title);
    }
    function toggleFavorite(title, btn) {
      let favs = getFavorites();
      if (favs.includes(title)) {
        favs = favs.filter(f => f !== title);
        btn.classList.remove("favorited");
      } else {
        favs.push(title);
        btn.classList.add("favorited");
      }
      localStorage.setItem("favorites", JSON.stringify(favs));
    }

    // Initialisation
    document.addEventListener("DOMContentLoaded", () => {
      loadSources();
      loadNews();
    });
  </script>
</body>
</html>
